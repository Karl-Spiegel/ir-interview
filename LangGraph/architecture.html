<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LangGraph Metadata Discovery Agent</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
            max-width: 1200px;
            width: 100%;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .header h1 {
            font-size: 28px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }
        
        .diagram-container {
            width: 100%;
            overflow-x: auto;
            background: #fafbfc;
            border-radius: 12px;
            padding: 20px;
        }
        
        svg {
            display: block;
            margin: 0 auto;
        }
        
        @keyframes pulse {
            0% { opacity: 0.3; }
            50% { opacity: 1; }
            100% { opacity: 0.3; }
        }
        
        @keyframes flow {
            0% { offset-distance: 0%; }
            100% { offset-distance: 100%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç LangGraph Metadata Discovery Agent</h1>
        </div>
        
        <div class="diagram-container">
            <svg width="900" height="750" viewBox="0 0 900 750" xmlns="http://www.w3.org/2000/svg">
                <!-- Define gradients and filters -->
                <defs>
                    <linearGradient id="purpleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="pinkGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#f093fb;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#f5576c;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="blueGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#4facfe;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="orangeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#fa709a;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#fee140;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="darkGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#30cfd0;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#330867;stop-opacity:1" />
                    </linearGradient>
                    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
                        <feOffset dx="0" dy="2" result="offsetblur"/>
                        <feFlood flood-color="#000000" flood-opacity="0.1"/>
                        <feComposite in2="offsetblur" operator="in"/>
                        <feMerge>
                            <feMergeNode/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                    <!-- Arrow marker -->
                    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#667eea" />
                    </marker>
                </defs>
                
                <!-- User Query -->
                <g transform="translate(50, 80)">
                    <rect x="0" y="0" width="140" height="40" rx="20" fill="url(#pinkGradient)" filter="url(#shadow)"/>
                    <text x="70" y="26" text-anchor="middle" fill="white" font-size="14" font-weight="600">üìù User Query</text>
                </g>
                
                <!-- Sample Query Bubble with speech bubble tail -->
                <g transform="translate(80, 20)">
                    <!-- Speech bubble tail pointing to User Query -->
                    <path d="M 60 50 L 45 60 L 75 60 Z" fill="#fff3cd" stroke="#ffc107" stroke-width="1"/>
                    <!-- Main bubble -->
                    <rect x="0" y="0" width="240" height="50" rx="8" fill="#fff3cd" stroke="#ffc107" stroke-width="1.5" filter="url(#shadow)"/>
                    <text x="10" y="20" fill="#856404" font-size="18">üí≠</text>
                    <text x="35" y="20" fill="#856404" font-size="12" font-style="italic">"What data do we have on</text>
                    <text x="35" y="35" fill="#856404" font-size="12" font-style="italic">customer defaults?"</text>
                </g>
                
                <!-- Arrow from User Query to Query Router -->
                <path d="M 190 100 Q 270 100 350 100" stroke="#667eea" stroke-width="2" fill="none" marker-end="url(#arrowhead)" stroke-dasharray="5,3" opacity="0.8"/>
                
                <!-- Query Router positioned to the right with more spacing -->
                <g transform="translate(360, 75)">
                    <rect x="0" y="0" width="180" height="60" rx="10" fill="url(#purpleGradient)" filter="url(#shadow)"/>
                    <text x="90" y="30" text-anchor="middle" fill="white" font-size="16" font-weight="600">üö¶ Query Router</text>
                    <text x="90" y="48" text-anchor="middle" fill="white" font-size="12">Intelligent query parsing</text>
                </g>
                
                <!-- Arrow from Query Router to State Engine -->
                <line x1="450" y1="135" x2="450" y2="160" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
                
                <!-- State Graph Engine -->
                <g transform="translate(330, 160)">
                    <rect x="0" y="0" width="240" height="140" rx="10" fill="#f7fafc" stroke="#667eea" stroke-width="3" filter="url(#shadow)"/>
                    <text x="120" y="30" text-anchor="middle" fill="#2d3748" font-size="16" font-weight="600">‚öôÔ∏è State Graph Engine</text>
                    <rect x="15" y="45" width="210" height="80" rx="6" fill="white"/>
                    <text x="25" y="65" fill="#4a5568" font-size="12">‚Ä¢ Current Context</text>
                    <text x="25" y="82" fill="#4a5568" font-size="12">‚Ä¢ User Intent Analysis</text>
                    <text x="25" y="99" fill="#4a5568" font-size="12">‚Ä¢ Search History Tracking</text>
                    <text x="25" y="116" fill="#4a5568" font-size="12">‚Ä¢ Access Level Verification</text>
                </g>
                
                <!-- Arrows to Search Nodes -->
                <line x1="390" y1="300" x2="220" y2="360" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="450" y1="300" x2="450" y2="360" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="510" y1="300" x2="680" y2="360" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
                
                <!-- Search Nodes -->
                <!-- Snowflake -->
                <g transform="translate(120, 370)">
                    <rect x="0" y="0" width="160" height="70" rx="10" fill="url(#blueGradient)" filter="url(#shadow)"/>
                    <text x="80" y="32" text-anchor="middle" fill="white" font-size="16" font-weight="600">‚ùÑÔ∏è Snowflake</text>
                    <text x="80" y="50" text-anchor="middle" fill="white" font-size="12">Schema Search</text>
                </g>
                
                <!-- Metadata Catalog -->
                <g transform="translate(370, 370)">
                    <rect x="0" y="0" width="160" height="70" rx="10" fill="url(#blueGradient)" filter="url(#shadow)"/>
                    <text x="80" y="32" text-anchor="middle" fill="white" font-size="16" font-weight="600">üìö Metadata</text>
                    <text x="80" y="50" text-anchor="middle" fill="white" font-size="12">Catalog API</text>
                </g>
                
                <!-- Business Glossary -->
                <g transform="translate(620, 370)">
                    <rect x="0" y="0" width="160" height="70" rx="10" fill="url(#blueGradient)" filter="url(#shadow)"/>
                    <text x="80" y="32" text-anchor="middle" fill="white" font-size="16" font-weight="600">üìñ Business</text>
                    <text x="80" y="50" text-anchor="middle" fill="white" font-size="12">Glossary Search</text>
                </g>
                
                <!-- Convergence arrows from Search Nodes -->
                <line x1="220" y1="440" x2="390" y2="490" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="450" y1="440" x2="450" y2="490" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="680" y1="440" x2="510" y2="490" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
                
                <!-- Result Compiler -->
                <g transform="translate(350, 500)">
                    <rect x="0" y="0" width="200" height="80" rx="10" fill="url(#orangeGradient)" filter="url(#shadow)"/>
                    <text x="100" y="28" text-anchor="middle" fill="#2d3748" font-size="16" font-weight="600">üîß Result Compiler</text>
                    <text x="100" y="46" text-anchor="middle" fill="#2d3748" font-size="11">‚Ä¢ Relevance Scoring</text>
                    <text x="100" y="60" text-anchor="middle" fill="#2d3748" font-size="11">‚Ä¢ Permission Checks</text>
                    <text x="100" y="74" text-anchor="middle" fill="#2d3748" font-size="11">‚Ä¢ Lineage Tracking</text>
                </g>
                
                <!-- Arrow to Response Generator -->
                <line x1="450" y1="580" x2="450" y2="610" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
                
                <!-- Response Generator -->
                <g transform="translate(330, 620)">
                    <rect x="0" y="0" width="240" height="100" rx="10" fill="url(#darkGradient)" filter="url(#shadow)"/>
                    <text x="120" y="30" text-anchor="middle" fill="white" font-size="16" font-weight="600">üí¨ Response Generator</text>
                    <rect x="20" y="40" width="200" height="50" rx="6" fill="rgba(255,255,255,0.2)"/>
                    <text x="30" y="58" fill="white" font-size="11" font-family="monospace">Found 3 tables:</text>
                    <text x="30" y="72" fill="white" font-size="11" font-family="monospace">‚Ä¢ loan_defaults</text>
                    <text x="30" y="84" fill="white" font-size="11" font-family="monospace">‚Ä¢ risk_scores ‚Ä¢ payment_hist</text>
                </g>
                
                <!-- Flow Indicators (animated dots) -->
                <circle r="4" fill="#764ba2">
                    <animateMotion dur="3s" repeatCount="indefinite">
                        <mpath href="#path1"/>
                    </animateMotion>
                    <animate attributeName="opacity" values="0;1;0" dur="3s" repeatCount="indefinite"/>
                </circle>
                
                <circle r="4" fill="#764ba2">
                    <animateMotion dur="3s" repeatCount="indefinite" begin="0.5s">
                        <mpath href="#path2"/>
                    </animateMotion>
                    <animate attributeName="opacity" values="0;1;0" dur="3s" repeatCount="indefinite" begin="0.5s"/>
                </circle>
                
                <circle r="4" fill="#764ba2">
                    <animateMotion dur="3s" repeatCount="indefinite" begin="1s">
                        <mpath href="#path3"/>
                    </animateMotion>
                    <animate attributeName="opacity" values="0;1;0" dur="3s" repeatCount="indefinite" begin="1s"/>
                </circle>
                
                <!-- Define paths for animation -->
                <path id="path1" d="M 190 100 Q 270 100 350 100" stroke="none" fill="none"/>
                <path id="path2" d="M 450 135 L 450 160" stroke="none" fill="none"/>
                <path id="path3" d="M 450 300 L 450 370" stroke="none" fill="none"/>
            </svg>
        </div>
    </div>
</body>
</html>